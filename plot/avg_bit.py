import matplotlib.pyplot as plt

# 示例数据
avg_bits = [7.886,
7.685,
7.458,
7.168,
6.994274139404297,
6.805171966552734,
6.669454574584961,
6.538433074951172,
6.4344940185546875,
6.292812347412109,
6.157093048095703,
6.058732032775879,
5.931353569030762,
5.778878211975098,
5.6319684982299805,
5.499495506286621,
5.4042816162109375,
5.285801887512207,
5.1086320877075195,
4.983644485473633,
4.885404586791992,
4.819204330444336,
4.7342376708984375,
4.519401550292969,
4.4739885330200195,
4.402185916900635,
4.302730560302734,
4.2125959396362305,
4.162534236907959,
4.074307918548584,
4.029872417449951,
3.9518721103668213,
3.8751113414764404,
3.818876028060913,
3.795275926589966]  # 横坐标：平均比特数
acc = [0.7748,
0.7680,
0.7649,
0.7717,
0.7695223654283548,
0.759666413949962,
0.7695223654283548,
0.7649734647460197,
0.7680060652009097,
0.7611827141774071,
0.7664897649734648,
0.7672479150871873,
0.7702805155420773,
0.7611827141774071,
0.759666413949962,
0.7589082638362395,
0.7581501137225171,
0.7513267626990144,
0.7482941622441244,
0.7414708112206216,
0.7475360121304018,
0.7429871114480667,
0.7399545109931767,
0.7391963608794542,
0.7361637604245641,
0.7391963608794542,
0.7384382107657316,
0.7361637604245641,
0.7361637604245641,
0.7308567096285065,
0.7391963608794542,
0.7361637604245641,
0.734647460197119,
0.7361637604245641,
0.734647460197119
]  # 纵坐标：准确率（%）
# SageAttn-8bit 特殊点
special_name = "SageAttn-8bit"
special_bit = 8.0           # 横坐标
special_acc = 0.7649         # 纵坐标

# 全精度水平线
fp_acc = 0.7687
# 画图
plt.figure(figsize=(6, 4))
plt.plot(avg_bits, acc, marker='o', linewidth=2)
plt.scatter(special_bit, special_acc, color='red', zorder=5, label=special_name)
plt.text(special_bit + 0.1, special_acc, special_name, color='red', fontsize=9)

# 添加水平线
plt.axhline(y=fp_acc, color='gray', linestyle='--', linewidth=1.5, label="FP Accuracy")
plt.text(avg_bits[0], fp_acc + 0.3, "FP 76.87%", color='gray', fontsize=9)

# 添加标签和标题
plt.xlabel("Average Bitwidth")
plt.ylabel("Accuracy (%)")
plt.title("Accuracy vs. Average Bitwidth")
plt.grid(True)

# 显示图像
plt.tight_layout()
plt.savefig("accuracy_vs_bitwidth.png")
plt.show()